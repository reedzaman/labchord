{"mappings":"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","sources":["src/scripts/view/add.js","src/scripts/view/update.js","src/scripts/control/eventListeners.js"],"sourcesContent":["let lastMsgSender = '';\n\nfunction addNotification(msg){\n    if(document.getElementsByClassName('main-box')[0].style.display === 'flex'){\n        let notification = document.createElement('div');\n        let msgBox = document.getElementsByClassName('msg-box')[0];\n        notification.classList.add('notification');\n        notification.innerText = msg;\n        msgBox.appendChild(notification);\n        lastMsgSender = 'notification';\n        msgBox.scrollTop = msgBox.scrollHeight;\n    }\n}\n\n\nfunction addMsg(msgData, name, id, type){\n\n    if(document.getElementsByClassName('main-box')[0].style.display === 'flex'){\n        let msgBox = document.getElementsByClassName('msg-box')[0];\n\n        let ownerName = document.createElement('h1');\n        ownerName.classList.add('owner-name');\n        if(lastMsgSender !== id) ownerName.innerText = name;\n\n        let ownerPhotoImage = document.createElement('div');\n        ownerPhotoImage.classList.add('owner-photo-image');\n        if(lastMsgSender !== id) ownerPhotoImage.style.backgroundImage = `url('https://icotar.com/avatar/${name.replace(/ /g, \"+\")}')`;\n\n        let ownerPhoto = document.createElement('div');\n        ownerPhoto.classList.add('owner-photo');\n        ownerPhoto.appendChild(ownerPhotoImage);\n\n        let msgContent = document.createElement('div');\n        msgContent.classList.add('msg-content');\n\n        if(type === 'text'){\n\n            let msgText = document.createElement('div');\n            msgText.classList.add('msg-text');\n            msgText.innerText = msgData;\n\n            msgContent.appendChild(ownerPhoto);\n            msgContent.appendChild(msgText);\n\n        } else if(type === 'image') {\n\n            let image = document.createElement('img');\n            image.classList.add('msg-image');\n            image.src = msgData;\n\n            msgContent.appendChild(ownerPhoto);\n            msgContent.appendChild(image);\n\n        }\n\n        let msgBlock = document.createElement('div');\n        msgBlock.classList.add('msg-block');\n        if(lastMsgSender === id) msgBlock.classList.add('msg-block-close');\n        msgBlock.appendChild(ownerName);\n        msgBlock.appendChild(msgContent);\n\n        if(lastMsgSender !== id) lastMsgSender = id;\n        msgBox.appendChild(msgBlock);\n        msgBox.scrollTop = msgBox.scrollHeight;\n\n    }\n}\n\nfunction addOwnMsg(msgData, type){\n\n    if(document.getElementsByClassName('main-box')[0].style.display === 'flex'){\n\n        let msgBox = document.getElementsByClassName('msg-box')[0];\n\n        let msgContent = document.createElement('div');\n        msgContent.classList.add('msg-content');\n\n        if(type === 'text'){\n\n            let msgText = document.createElement('div');\n            msgText.classList.add('msg-text');\n            msgText.innerText = msgData;\n\n            msgContent.appendChild(msgText);\n\n        } else if(type === 'image') {\n\n            let image = document.createElement('img');\n            image.classList.add('msg-image');\n            image.src = msgData;\n\n            msgContent.appendChild(image);\n\n        }\n\n        let msgBlock = document.createElement('div');\n        msgBlock.classList.add('msg-block');\n        msgBlock.classList.add('msg-block-own');\n        if(lastMsgSender === 'own') msgBlock.classList.add('msg-block-close');\n        msgBlock.appendChild(msgContent);\n\n        lastMsgSender = 'own';\n        msgBox.appendChild(msgBlock);\n        msgBox.scrollTop = msgBox.scrollHeight;\n\n    }\n\n}\n\nexport {\n    addNotification,\n    addMsg,\n    addOwnMsg\n}\n","function updateTyping(typing){\n    let typingInd = document.getElementsByClassName('typing-indicator')[0];\n    let typingArr = Object.values(typing);\n    typingArr = typingArr.map(item => {\n        return item.split(' ')[0];\n    })\n\n    if(typingArr.length > 1){\n        let tempLastItem = typingArr.pop();\n        typingArr.push(typingArr.pop() + ' and');\n        typingArr.push(tempLastItem);\n    }\n\n    let str = typingArr.toString();\n    console.log(typingArr);\n    str = str.toString().replace(/,/g, ', ');\n    console.log(str);\n\n    if(typingArr.length > 1){\n        str = `${str} are typing`;\n    } \n    else if(typingArr.length === 1){\n        str = `${str} is typing`;\n    } \n    else str = ``;\n\n    typingInd.innerText = str;\n\n    if(str !== ''){\n        let img = document.createElement('img');\n        img.src = './assets/typing.gif';\n        img.style.width = '30px';\n        img.style.height = '15px';\n        img.style.marginTop = 'auto';\n        typingInd.appendChild(img);\n    }\n    \n}\n\nfunction toggleTheme(){\n    let themeIcon = document.getElementById('themeIcon');\n    let body = document.getElementsByTagName('body')[0];\n\n    body.classList.toggle('dark');\n    if(themeIcon.innerText === 'light_mode')\n        themeIcon.innerText = 'dark_mode'\n    else themeIcon.innerText = 'light_mode';\n}\n\nexport {\n    updateTyping,\n    toggleTheme\n}\n","import { socket } from './client.js';\nimport { addOwnMsg } from '../view/add.js';\nimport { toggleTheme } from '../view/update.js';\n\n\nlet imageBuffer = '';\nlet username = 'Anonymous';\nconst msgForm = document.getElementById('msgForm');\nconst msgInput = document.getElementById('textInputBox');\nconst imageInput = document.querySelector('input[type=\"file\"]');\n\n\ndocument.getElementById('sendNameForm').addEventListener(\"submit\", () => {\n    let input = document.getElementById('username').value;\n    let profileImg = document.getElementById('profileImg');\n    let profileName = document.getElementById('profileName');\n\n\n    if(input !== '') username = input;\n    socket.emit('setName', username);\n\n    profileImg.src = `https://icotar.com/avatar/${username.replace(/ /g, '+')}`;\n    profileImg.style.visibility = 'unset';\n\n    profileName.innerText = username;\n    profileName.style.visibility = 'unset';\n\n    document.getElementsByClassName('name-box')[0].style.display = 'none';\n    document.getElementsByClassName('main-box')[0].style.display = 'flex';\n    document.getElementsByClassName('msg-input')[0].focus();\n});\n\ndocument.querySelector('#theme').addEventListener('click', () => { toggleTheme() });\n\ndocument.querySelector('#imageClose').addEventListener('click', () => {\n    imageBuffer = '';\n    document.querySelector(\"#imagePreview\").src = \"\";\n    document.querySelector(\"#imagePreviewWrapper\").style.display = \"none\";\n    document.getElementById('textInputBox').removeAttribute('disabled');\n    document.getElementById('imageInputButton').value = '';\n    document.getElementById('textInputBox').style.width = '75%';\n\n});\n\nmsgForm.addEventListener('submit', event => {\n\n    if(imageBuffer === ''){\n        if(msgInput.value.length > 0){\n            addOwnMsg(msgInput.value, 'text');\n            socket.emit('send', msgInput.value, 'text');\n            msgInput.value = '';\n        }\n    } \n    else{\n        addOwnMsg(imageBuffer, 'image');\n        socket.emit('send', imageBuffer, 'image');\n        imageBuffer = '';\n        document.getElementById('imageInputButton').value = '';\n        document.getElementById('textInputBox').style.width = '75%';\n        document.getElementById('textInputBox').removeAttribute('disabled');\n        document.getElementById('textInputBox').focus();\n        document.getElementById('imagePreviewWrapper').style.display = 'none';\n    } \n\n});\n\nimageInput.addEventListener('change', (e) => {\n\n    //let canvas = document.getElementById('imageBufferCanvas');\n    let canvas = document.createElement('canvas');\n    let ctx = canvas.getContext('2d');\n\n    const reader = new FileReader();\n    reader.onload = () => {\n        let nh, nw, aspectRatio;\n        const img = new Image();\n\n        img.src = reader.result;\n        img.onload = () => {\n            nh = img.naturalHeight;\n            nw = img.naturalWidth;\n            aspectRatio = nh/nw;\n            canvas.width = 220;\n            canvas.height = canvas.width * aspectRatio;\n\n            ctx.drawImage(img, 0, 0, canvas.width, canvas.height);\n\n            imageBuffer = canvas.toDataURL();\n            console.log(imageBuffer);\n        }\n\n        document.getElementById('imagePreview').src = reader.result;\n        document.getElementById('imagePreviewWrapper').style.display = 'unset';\n        document.getElementById('textInputBox').style.width = '65%';\n        document.getElementById('textInputBox').disabled = true;\n    }\n    reader.readAsDataURL(imageInput.files[0]);\n\n}, false);\n"],"names":["$e0f07c527044e04b$var$lastMsgSender","$e0f07c527044e04b$export$c7def531c087da85","msg","document","getElementsByClassName","style","display","notification","createElement","msgBox","classList","add","innerText","appendChild","scrollTop","scrollHeight","$e0f07c527044e04b$export$4fa8a58003fa96b2","msgData","name","id","type","ownerName","ownerPhotoImage","backgroundImage","replace","ownerPhoto","msgContent","msgText","image","src","msgBlock","$e0f07c527044e04b$export$a6b805c6138a2ada","$58a2f6243e62c404$export$77593c4a629d5940","typing","typingInd","typingArr","Object","values","map","item","split","length","tempLastItem","pop","push","str","toString","console","log","img","width","height","marginTop","$58a2f6243e62c404$export$f543642fc33c1018","themeIcon","getElementById","getElementsByTagName","toggle","$eSQOb","parcelRequire","$4dfce8fc7c351390$var$imageBuffer","$4dfce8fc7c351390$var$username","$4dfce8fc7c351390$var$msgForm","$4dfce8fc7c351390$var$msgInput","$4dfce8fc7c351390$var$imageInput","querySelector","addEventListener","input","value","profileImg","profileName","socket","emit","visibility","focus","$7BOf4","toggleTheme","removeAttribute","event","$jjlwn","addOwnMsg","e","canvas","ctx","getContext","reader","FileReader","onload","nh","nw","aspectRatio","Image","result","naturalHeight","naturalWidth","drawImage","toDataURL","disabled","readAsDataURL","files"],"version":3,"file":"index.7fbaf4c4.js.map"}